/* /assets/css/style.css */
/* ======================================
   Finch Archive · Global Stylesheet
   ====================================== */

/* ----------------
   Theme tokens
   ---------------- */
:root{
  /* Base (dark-first) */
  --bg:#000; --fg:#E6E6E6; --muted:#9A9A9A; --accent:#7A3A3A; --line:#222;

  --wrap:1100px;     /* header max width */
  --col:72ch;        /* content column width */

  --mono:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono",monospace;
  --serif:Georgia,"Times New Roman",serif;

  --header-bg: rgba(0,0,0,.85);

  /* Badge/card base */
  --badge-bg:#0b0b0b;
  --badge-border: rgba(122,58,58,.45);

  /* Components: cards/buttons */
  --radius:12px;
  --radius-sm:8px;
  --card-bg: rgba(255,255,255,0.03);
  --card-bg-hover: rgba(255,255,255,0.06);
  --shadow-soft: 0 1px 0 var(--line), 0 4px 12px rgba(0,0,0,.10);
  --shadow: 0 1px 0 var(--line), 0 8px 24px rgba(0,0,0,.15);

  /* Accent-on-fill contrast */
  --on-accent:#fff;

  /* micro-motion */
  --dur-fast:.15s; --dur-med:.25s;
  --ease: cubic-bezier(.4,0,.2,1);
}

:root{ color-scheme:dark light; accent-color:var(--accent); }
::selection{ background:rgba(122,58,58,.28); color:inherit; }
:target{ scroll-margin-top:78px; }

/* Light theme */
:root[data-theme="light"]{
  --bg:#f6f2e7; --fg:#2e2b27; --muted:#6f655b; --line:#d9cfc0;
  --header-bg: rgba(246,242,231,.9);

  --badge-bg:#f4efe4;
  --badge-border:rgba(122,58,58,.35);

  --card-bg: rgba(0,0,0,0.02);
  --card-bg-hover: rgba(0,0,0,0.05);
}

/* ----------------
   Base / Resets
   ---------------- */
*{ box-sizing:border-box; }
html,body{ margin:0; padding:0; background:var(--bg); color:var(--fg); }
body{ font:16px/1.65 var(--mono); -webkit-font-smoothing:antialiased; }
a{ color:inherit; text-decoration:none; }
a:hover{ color:#000; } :root[data-theme="dark"] a:hover{ color:#fff; }
img{ max-width:100%; height:auto; display:block; }

/* Icons */
.icon{ width:18px; height:18px; fill:currentColor; vertical-align:-0.12em; }

/* ----------------
   Layout helpers
   ---------------- */
.wrap{ max-width:var(--wrap); margin:0 auto; padding:0 20px; }
.container{ max-width:var(--col); margin:3rem auto; padding:0 1.25rem; }
.rule{ height:1px; background:linear-gradient(90deg,var(--accent),transparent); }
hr{ border:0; height:1px; background:linear-gradient(90deg,transparent,rgba(122,58,58,.4),transparent); margin:2rem 0; }

/* ----------------
   Typography
   ---------------- */
h1,h2,h3{ font-family:var(--serif); line-height:1.25; margin:0 0 .8rem; }
h1{ font-size:clamp(1.8rem,2.6vw,2.2rem); }
h2{ font-size:clamp(1.2rem,1.9vw,1.5rem); }
.meta{ color:var(--muted); font-size:.95rem; }

/* ======================================
   Header
   ====================================== */
header.site{
  position:sticky; top:0; z-index:10;
  background:var(--header-bg);
  backdrop-filter:saturate(180%) blur(6px);
  border-bottom:1px solid var(--line);
}

/* Header grid */
.header-bar{
  display:grid; grid-template-columns:1fr auto;
  align-items:center; gap:12px;
}
.brand{ display:flex; align-items:center; gap:.6rem; padding:12px 0; white-space:nowrap; }
.brand .dot{ width:8px; height:8px; border-radius:999px; background:var(--accent); }
.brand a{ font-family:var(--serif); font-size:1.1rem; }
.header-actions{ display:flex; align-items:center; gap:8px; }

/* Primary nav */
.primary-nav{
  display:flex; gap:18px; align-items:center;
  overflow-x:auto; white-space:nowrap; -webkit-overflow-scrolling:touch;
  padding:10px 0;
}
.primary-nav::-webkit-scrollbar{ display:none; }
.primary-nav a{
  position:relative; padding-bottom:6px; opacity:.85; transition:opacity var(--dur-fast) var(--ease);
}
.primary-nav a::after{
  content:""; position:absolute; left:0; right:0; bottom:0; height:2px;
  background:var(--accent); transform:scaleX(0); transform-origin:left;
  transition:transform var(--dur-med) var(--ease); opacity:.95;
}
.primary-nav a:hover{ opacity:1; }
.primary-nav a:hover::after{ transform:scaleX(1); opacity:.65; }
.primary-nav a[aria-current="page"]{ opacity:1; }
.primary-nav a[aria-current="page"]::after{ transform:scaleX(1); }

/* Mobile/desktop header tweaks */
@media (max-width:720px){
  .header-bar{ grid-template-columns:1fr auto; grid-template-rows:auto auto; row-gap:6px; }
  .brand{ padding:8px 0; }
  .primary-nav{ grid-column:1 / -1; padding:6px 0 8px; gap:14px; }
}
@media (min-width:980px){
  header.site .wrap{ position:relative; }
  .header-bar{ display:flex; flex-direction:column; align-items:center; gap:6px; }
  .brand{ padding-top:14px; }
  .primary-nav{ padding-top:0; gap:22px; }
  .header-actions{ position:absolute; right:20px; top:12px; }
}

/* ======================================
   Theme toggle (with tactile polish)
   ====================================== */
.theme-toggle{
  display:inline-flex; align-items:center; justify-content:center;
  width:36px; height:36px; border-radius:6px;
  border:1px solid var(--badge-border); background:var(--badge-bg); color:var(--fg);
  cursor:pointer; margin-left:10px;
  transition:opacity var(--dur-fast) var(--ease), transform var(--dur-fast) var(--ease), border-color var(--dur-fast) var(--ease), box-shadow var(--dur-fast) var(--ease);
  -webkit-appearance:none; appearance:none; background-image:none;
}
.theme-toggle:hover{
  opacity:1; transform:translateY(-1px);
  border-color:var(--accent);
  box-shadow:0 0 0 3px rgba(122,58,58,.16);
}
.theme-toggle:active{ transform:translateY(0) scale(.97); }
.theme-toggle:focus-visible{
  outline:2px dashed var(--accent); outline-offset:2px;
  box-shadow:0 0 0 4px rgba(122,58,58,.18);
}

/* Icons: sun visible by default (so an icon always shows) */
.theme-toggle .icon{ display:none; width:18px; height:18px; fill:currentColor; transition:transform var(--dur-med) var(--ease), opacity var(--dur-fast) var(--ease); }
.theme-toggle .icon-sun{ display:inline-block; }

/* Light mode => show moon (action = go dark) */
:root[data-theme="light"] .theme-toggle .icon-sun{ display:none; }
:root[data-theme="light"] .theme-toggle .icon-moon{ display:inline-block; }

/* Tiny, classy hover motion on the visible glyph */
.theme-toggle:hover .icon-sun{ transform:rotate(10deg) scale(1.06); }
:root[data-theme="light"] .theme-toggle:hover .icon-moon{ transform:rotate(-8deg) scale(1.06); }

/* Respect reduced motion */
@media (prefers-reduced-motion:reduce){
  .theme-toggle,
  .theme-toggle .icon{ transition:none !important; transform:none !important; }
  .theme-toggle:hover{ box-shadow:none; }
}

/* WebKit/Gecko crescent reliability */
.theme-toggle .icon-moon path{ fill-rule:evenodd; clip-rule:evenodd; }

/* ======================================
   Page header
   ====================================== */
.page-header{ margin:1.75rem 0 1.25rem; }
.page-header .page-title{ font-family:var(--serif); font-size:clamp(1.6rem,2.6vw,2.2rem); margin:0 0 .35rem; }
.page-header .page-lead{ color:var(--muted); margin:0; }
main .rule:first-child{ display:none; }

/* ======================================
   Homepage: Featured + list
   ====================================== */
.feature-card{ border-bottom:1px dashed rgba(122,58,58,.35); padding-bottom:18px; margin-bottom:10px; }
.feature-link{ display:grid; gap:18px; grid-template-columns:1fr; }
.feature-thumb{ width:100%; aspect-ratio:16/9; object-fit:cover; border:1px solid rgba(122,58,58,.35); filter:grayscale(10%); }
.feature-meta{ min-width:0; }
.feature-title{ font-family:var(--serif); font-size:clamp(22px,2.6vw,34px); line-height:1.2; margin:0 0 .35rem; letter-spacing:.01em; }
.feature-sub{ color:var(--muted); font-size:.95rem; display:flex; gap:.5rem; align-items:center; flex-wrap:wrap; }
.feature-excerpt{ color:#cfcfcf; margin:.55rem 0 0; line-height:1.6; max-width:38ch; }
@media (min-width:980px){
  .feature-link{ grid-template-columns:55% 1fr; align-items:start; column-gap:22px; }
  .feature-thumb{ aspect-ratio:3/2; }
}

/* ======================================
   Logs lists
   ====================================== */
.log-list{ list-style:none; margin:0; padding:0; display:grid; gap:12px; }
.log-card{ display:flex; gap:12px; align-items:flex-start; padding:10px 0; border-bottom:1px dashed rgba(122,58,58,.35); }
.log-link{ display:flex; gap:12px; align-items:flex-start; border:0; }
.log-thumb{ width:clamp(88px,30vw,160px); aspect-ratio:3/2; object-fit:cover; border:1px solid rgba(122,58,58,.35); filter:grayscale(20%); }
.log-meta{ min-width:0; }
.log-title{ font-family:var(--serif); font-size:clamp(16px,4vw,22px); margin:0 0 .25rem; line-height:1.2; }
.log-sub{ color:var(--muted); font-size:.9rem; display:flex; gap:.5rem; align-items:center; flex-wrap:wrap; }
.log-id{ border:1px solid var(--accent); padding:2px 6px; font-size:.75rem; border-radius:3px; }
@media (min-width:700px){
  .log-list{ gap:14px; } .log-card{ gap:14px; } .log-thumb{ width:clamp(120px,18vw,180px); }
}

/* ======================================
   Single Log
   ====================================== */
.content img{ border:1px solid rgba(255,255,255,.07); }
:root[data-theme="light"] .content img{ border-color:rgba(0,0,0,.07); }
.log-hero{ width:100%; max-height:50vh; object-fit:cover; border:1px solid rgba(255,255,255,.07); margin:1rem 0; }
:root[data-theme="light"] .log-hero{ border-color:rgba(0,0,0,.07); }
.log-header{ margin-bottom:1.25rem; }
.log-figure{ margin:1.25rem 0; }
.log-content{ font-size:1.05rem; line-height:1.7; }
.log-artifacts{ margin-top:2rem; border-top:1px solid var(--line); padding-top:1rem; }
.log-artifacts h2{ margin:0 0 .75rem; font-family:var(--serif); font-size:1.25rem; color:var(--fg); }
.artifact-list{ list-style:none; padding:0; margin:0; display:grid; grid-template-columns:repeat(auto-fit,minmax(220px,1fr)); gap:.75rem; }

/* ======================================
   Logs Archive layout
   ====================================== */
.archive{ max-width:700px; margin:3rem auto; padding:0 1rem; }
.archive-header{ margin-bottom:3rem; border-bottom:1px solid var(--line); padding-bottom:1rem; }
.archive-title{ font-family:var(--serif); font-size:2rem; margin:0 0 .25rem; color:var(--fg); }
.archive-subtitle{ font-size:.9rem; color:var(--muted); margin:0; }
.archive-list{ display:flex; flex-direction:column; gap:2.5rem; }
.archive-item-title{ margin-bottom:.25rem; font-family:var(--serif); font-weight:600; }
.archive-item-title a{ color:var(--fg); text-decoration:none; }
.archive-item-title a:hover{ text-decoration:underline; }
.archive-item-meta{ color:#777; font-size:.85rem; margin:0 0 1rem; }
.archive-item-id{ margin-left:.5rem; color:#555; }
.archive-item-excerpt{ color:#ccc; line-height:1.6; margin:0; }

/* ======================================
   Pager / Prev–Next Cards (original look)
   ====================================== */
.pager{ margin:1.75rem 0 0; }
.pager-inner{
  display:flex; justify-content:space-between; align-items:center; gap:.75rem;
  border-top:1px solid var(--line); padding-top:1rem;
}
.pager-status{ color:var(--muted); font-size:.95rem; }

/* Centered, monospace cards with subtle inset shadow */
.pager-link,
.prev_next a, .prev-next a, .pager a, .nav-cards a{
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  text-align:center;
  font-family:var(--mono);
  font-size:.95rem;
  line-height:1.4;
  padding:18px 22px;
  border:1px solid var(--badge-border);
  border-radius:12px;
  background:var(--badge-bg);
  color:var(--fg);
  text-decoration:none;
  box-shadow: inset 0 1px rgba(255,255,255,0.08), 0 2px 6px rgba(0,0,0,0.10);
  transition:background var(--dur-fast) var(--ease), border-color var(--dur-fast) var(--ease), transform var(--dur-fast) var(--ease), box-shadow var(--dur-fast) var(--ease), color var(--dur-fast) var(--ease);
}

/* Stack on phones, 2-up wider */
.prev_next, .prev-next, .nav-cards{
  display:grid;
  grid-template-columns:1fr;
  gap:14px;
  margin:2.25rem 0 0;
  justify-items:center;
}
@media (min-width:760px){
  .prev_next, .prev-next, .nav-cards{ grid-template-columns:1fr 1fr; }
}

/* Hover: Finch red fill */
.pager-link:hover,
.prev_next a:hover, .prev-next a:hover, .pager a:hover, .nav-cards a:hover{
  transform:translateY(-1px);
  background:var(--accent);
  border-color:var(--accent);
  color:var(--on-accent);
  box-shadow:0 3px 10px rgba(0,0,0,0.20);
}
.pager-link:active,
.prev_next a:active, .prev-next a:active, .pager a:active, .nav-cards a:active{ transform:translateY(0); }
.pager-link.is-disabled{ opacity:.45; pointer-events:none; }

.prev_next a small, .prev-next a small, .pager a small, .nav-cards a small{
  display:block; font-size:.85rem; opacity:.7; margin-bottom:4px; letter-spacing:.02em;
}
.prev_next a:hover small, .prev-next a:hover small, .pager a:hover small, .nav-cards a:hover small{
  color:rgba(255,255,255,.92);
}

/* ======================================
   Footer & badges (buttons)
   ====================================== */
footer.site{ border-top:1px solid var(--line); margin-top:3rem; padding:1.25rem 0; color:var(--muted); font-size:.95rem; }
.footer-flex{ display:flex; justify-content:space-between; align-items:center; gap:1rem; flex-wrap:wrap; }
.footer-left{ color:var(--muted); font-size:.95rem; white-space:nowrap; }

.badges{ display:flex; gap:12px; list-style:none; margin:0; padding:0; align-items:center; flex-wrap:wrap; }
.badges li{ margin:0; }

.badge{
  display:inline-flex; align-items:center; gap:8px;
  padding:8px 12px;
  border:1px solid var(--badge-border);
  border-radius:var(--radius-sm);
  background:var(--card-bg);
  color:var(--fg);
  text-decoration:none;
  font-size:.95rem; line-height:1;
  box-shadow:var(--shadow-soft);
  transition:background var(--dur-fast) var(--ease), border-color var(--dur-fast) var(--ease), transform var(--dur-fast) var(--ease), color var(--dur-fast) var(--ease);
}
.badge:hover{
  transform:translateY(-1px);
  background:var(--accent);
  border-color:var(--accent);
  color:var(--on-accent);
  box-shadow:var(--shadow);
}

.badge-icon,
a.badge svg{
  width:1.05em; height:1.05em; flex:0 0 auto;
  fill:currentColor; stroke:currentColor;
}

/* Icon-specific soft hues on hover */
.badge-github:hover{ color:#fff; }
.badge-feed:hover{ color:#fff; }
.badge-human:hover{ color:#fff; }
.badge-cc .badge-icon circle{ fill:none; stroke:currentColor; stroke-width:1.5; }

/* Light/Dark default text colors for non-hover */
[data-theme="dark"] .badge{ color:rgba(255,255,255,.82); }
[data-theme="light"] .badge{ color:#2e2b27; }

/* Mobile footer centering (like the old look) */
@media (max-width:720px){
  .footer-flex{ justify-content:center; text-align:center; }
  .footer-left{ width:100%; text-align:center; }
  .badges{ justify-content:center; }
}

/* ======================================
   Enhancements & Utilities
   ====================================== */
a:focus-visible,.btn:focus-visible,.log-link:focus-visible,.theme-toggle:focus-visible,
.pager-link:focus-visible,.badge:focus-visible,.prev_next a:focus-visible,.prev-next a:focus-visible,.nav-cards a:focus-visible{
  outline:2px dashed var(--accent); outline-offset:2px;
}
@media (prefers-reduced-motion:reduce){
  *{ transition:none !important; animation:none !important; }
}

/* Buttons (used by Artifacts links) */
.btn{
  display:inline-flex; align-items:center; justify-content:center; gap:.4rem;
  padding:.5rem .75rem; border:1px solid var(--badge-border); border-radius:6px;
  background:var(--badge-bg); color:var(--fg); text-decoration:none;
  font:14px/1.2 var(--mono); opacity:.95;
  transition:opacity var(--dur-fast) var(--ease), transform var(--dur-fast) var(--ease), border-color var(--dur-fast) var(--ease), box-shadow var(--dur-fast) var(--ease);
  will-change:transform;
}
.btn:hover{
  opacity:1; transform:translateY(-1px);
  border-color:var(--accent);
  background:var(--accent);
  color:var(--on-accent);
  box-shadow:var(--shadow);
}
.btn:active{ transform:translateY(0) scale(.98); }
.btn .icon{ width:16px; height:16px; }

/* Spacing utilities */
.mt-12{margin-top:.75rem}.mb-12{margin-bottom:.75rem}.my-12{margin-top:.75rem;margin-bottom:.75rem}
.mt-20{margin-top:1.25rem}.mb-20{margin-bottom:1.25rem}.my-20{margin-top:1.25rem;margin-bottom:1.25rem}
.mt-32{margin-top:2rem}.mb-32{margin-bottom:2rem}.my-32{margin-top:2rem;margin-bottom:2rem}

/* Rule spacing modifiers */
.rule--tight{ margin:.75rem 0; }
.rule--spaced{ margin:1.25rem 0; }

/* Clearer title hovers */
.log-card .log-title a,.archive-item-title a{ text-decoration:none; }
.log-card .log-title a:hover,.archive-item-title a:hover{ text-decoration:underline; }

/* Visually hidden utility */
.visually-hidden{
  position:absolute !important; width:1px; height:1px; margin:-1px; padding:0; border:0;
  clip:rect(0 0 0 0); clip-path:inset(50%); overflow:hidden; white-space:nowrap;
}

/* Small responsive tweaks */
@media (max-width:640px){
  .wrap{ padding:0 14px; }
  .container{ margin:2rem auto; padding:0 1rem; }
  .brand a{ font-size:1rem; }
  .primary-nav{ gap:12px; }
}

/* Skip link (a11y) */
.skip-link{
  position:absolute; left:-9999px; top:auto; width:1px; height:1px; overflow:hidden;
}
.skip-link:focus{
  position:fixed; left:12px; top:10px; width:auto; height:auto; padding:.5rem .75rem;
  background:var(--badge-bg); color:var(--fg); border:1px solid var(--badge-border);
  border-radius:6px; z-index:9999; outline:2px dashed var(--accent); outline-offset:2px;
}

/* ===== Print ===== */
@media print{
  :root{ --bg:#fff; --fg:#000; --muted:#333; --line:#ddd; }
  html,body{ background:#fff !important; color:#000 !important; }
  header.site, footer.site, .theme-toggle{ display:none !important; }
  .container, .wrap, .archive, .fieldnote, .fn-archive{ max-width:100% !Important; padding:0 !important; margin:0 !important; }
  .log-hero, .feature-thumb, .log-thumb{ border-color:#ccc !important; }
  a{ color:#000 !important; text-decoration:underline; }
  a[href^="http"]:after{ content:" (" attr(href) ")"; font-size:.9em; }
}

html{ scroll-behavior:smooth; }