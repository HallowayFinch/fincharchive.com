<!-- _includes/img.html -->
{%- comment -%}
Reusable image include
Params:
  src     (required) – URL
  src2x   (optional) – 2x URL
  alt     (required)
  w       (optional) – intrinsic width (number)
  h       (optional) – intrinsic height (number)
  class   (optional)
  sizes   (optional) – e.g. "(min-width:980px) 720px, 100vw"
  loading (optional) – lazy|eager (default lazy)
  fetch   (optional) – high|low|auto (default auto)
{%- endcomment -%}

{%- assign _src   = include.src -%}
{%- assign _src2  = include.src2x -%}
{%- assign _alt   = include.alt | default: "" -%}
{%- assign _w     = include.w -%}
{%- assign _h     = include.h -%}
{%- assign _cls   = include.class -%}
{%- assign _sizes = include.sizes | default: "100vw" -%}
{%- assign _load  = include.loading | default: "lazy" -%}
{%- assign _prio  = include.fetch | default: "auto" -%}

{%- if _w and _h -%}
  {%- assign _ratio_style = 'aspect-ratio: ' | append: _w | append: '/' | append: _h | append: ';' -%}
{%- endif -%}

<img
  src="{{ _src }}"
  {%- if _src2 %} srcset="{{ _src }} 1x, {{ _src2 }} 2x"{% endif -%}
  alt="{{ _alt | escape }}"
  class="{{ _cls }}"
  sizes="{{ _sizes }}"
  {%- if _w and _h %} width="{{ _w }}" height="{{ _h }}"{% endif -%}
  {%- if _ratio_style %} style="{{ _ratio_style }}"{% endif -%}
  loading="{{ _load }}"
  decoding="async"
  fetchpriority="{{ _prio }}"
/>