<!-- /_includes/social-meta.html -->
{%- comment -%}
Outputs Open Graph & Twitter Card tags for unfurls.
Looks for, in order: page.og_image, page.social_image, page.hero_image, site.social_image
{%- endcomment -%}
{%- assign seo_title = page.seo_title | default: page.title | default: site.title -%}
{%- assign seo_desc  = page.seo_description | default: page.description | default: page.excerpt | default: site.description -%}
{%- assign seo_desc  = seo_desc | strip_html | strip_newlines | truncate: 200 -%}

{%- assign share_image = page.og_image | default: page.social_image | default: page.hero_image | default: site.social_image -%}
{%- assign share_image_alt = page.og_image_alt | default: page.hero_alt | default: seo_title -%}

<meta property="og:title" content="{{ seo_title | escape }}">
<meta property="og:description" content="{{ seo_desc | escape }}">
<meta property="og:url" content="{{ page.url | absolute_url }}">
<meta property="og:site_name" content="{{ site.title | default: 'Site' | escape }}">
<meta property="og:type" content="{% if page.collection %}article{% else %}website{% endif %}">
{%- if page.date -%}<meta property="article:published_time" content="{{ page.date | date_to_xmlschema }}">{%- endif -%}
{%- if page.last_modified_at -%}<meta property="article:modified_time" content="{{ page.last_modified_at | date_to_xmlschema }}">{%- endif -%}

<meta name="twitter:card" content="summary_large_image">
{%- if site.twitter_username -%}
<meta name="twitter:site" content="@{{ site.twitter_username | replace:'@','' }}">
{%- endif -%}

{%- if share_image -%}
  <meta property="og:image" content="{{ share_image | absolute_url }}">
  <meta property="og:image:alt" content="{{ share_image_alt | escape }}">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">
  <meta name="twitter:image" content="{{ share_image | absolute_url }}">
{%- endif -%}
